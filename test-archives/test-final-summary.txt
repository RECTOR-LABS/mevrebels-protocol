✓ Distribution math verified for multiple profit amounts
      ✔ Calculates distribution correctly for various profit amounts

  Strategy Registry
    Admin Initialization
      ✔ Initializes admin config
      ✔ Fails to initialize admin config twice
    Strategy Creation
      ✔ Creates a valid strategy (468ms)
      ✔ Fails with profit threshold too low
      ✔ Fails with slippage too high
      ✔ Fails with no DEXs specified
      ✔ Fails with no token pairs specified
      ✔ Fails with identical tokens in pair
    Strategy Approval
      ✔ Admin approves a strategy (473ms)
      ✔ Fails when non-admin tries to approve (498ms)
      ✔ Admin rejects a strategy (972ms)
    Performance Tracking
      ✔ Updates metrics after successful execution (477ms)
      ✔ Updates metrics after failed execution (467ms)
      ✔ Handles multiple successful executions (2375ms)
      ✔ Calculates success rate correctly
      ✔ Gets strategy stats
      ✔ Fails to update metrics for unapproved strategy (477ms)


  41 passing (22s)
  9 failing

  1) DAO Governance
       Proposal Creation
         Creates strategy approval proposal with sufficient tokens:
     Error: AnchorError thrown in programs/dao-governance/src/instructions/create_proposal.rs:61. Error Code: InsufficientTokens. Error Number: 6000. Error Message: Insufficient REBEL tokens to create proposal.
      at Function.parse (node_modules/@coral-xyz/anchor/src/error.ts:152:14)
      at translateError (node_modules/@coral-xyz/anchor/src/error.ts:277:35)
      at MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:35:29)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)

  2) DAO Governance
       Voting
         Fails if user has no REBEL tokens:
     AssertionError: expected 'AnchorError caused by account: propos…' to include 'NoVotingPower'
      at /Users/rz/local-dev/mevrebels-protocol/tests/dao-governance.ts:530:35
      at Generator.throw (<anonymous>)
      at rejected (tests/dao-governance.ts:39:65)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)

  3) DAO Governance
       Proposal Execution
         Verifies proposal execution requirements:
     Error: Account does not exist or has no data EULX7owGq7QS2XMFMQvawFuVXPLJreMSMxgpfBKRJi6
      at AccountClient.fetch (node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)

  4) DAO Integration
       Full Governance Flow
         Complete flow: strategy → proposal → vote → approve:
     TypeError: Cannot read properties of undefined (reading 'fetch')
      at /Users/rz/local-dev/mevrebels-protocol/tests/dao-integration.ts:213:69
      at Generator.next (<anonymous>)
      at fulfilled (tests/dao-integration.ts:38:58)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)

  5) DAO Integration
       Multi-Program Coordination
         Verifies all three programs can interact:
     TypeError: Cannot read properties of undefined (reading 'fetch')
      at /Users/rz/local-dev/mevrebels-protocol/tests/dao-integration.ts:362:63
      at Generator.next (<anonymous>)
      at /Users/rz/local-dev/mevrebels-protocol/tests/dao-integration.ts:41:71
      at new Promise (<anonymous>)
      at __awaiter (tests/dao-integration.ts:37:12)
      at Context.<anonymous> (tests/dao-integration.ts:358:63)
      at processImmediate (node:internal/timers:491:21)

  6) Execution Engine
       Strategy Execution - Happy Path
         Executes strategy with 10 SOL and distributes profit correctly:
     Simulation failed. 
Message: Transaction simulation failed: Error processing Instruction 0: sum of account balances before and after instruction do not match. 
Logs: 
[
  "Program log: Borrowed 10000000000 lamports from vault",
  "Program log: Flashloan fee: 9000000 lamports",
  "Program log: Mock arbitrage: 10000000000 lamports → 10800000000 lamports (8% profit)",
  "Program log: Arbitrage result: 10800000000 lamports",
  "Program log: Repaid 10009000000 lamports to vault",
  "Program log: Gross profit: 800000000 lamports",
  "Program log: Net profit: 791000000 lamports",
  "Program log: Distributing profits: creator=316400000, executor=316400000, treasury=158200000",
  "Program ExecRebe1sEngineMocKF1ash1oanArbitrageV1111 consumed 16999 of 200000 compute units",
  "Program ExecRebe1sEngineMocKF1ash1oanArbitrageV1111 failed: sum of account balances before and after instruction do not match"
]. 
Catch the `SendTransactionError` and call `getLogs()` on it for full details.
  

  7) Execution Engine
       Strategy Execution - Happy Path
         Updates strategy metrics via CPI:
